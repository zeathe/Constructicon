# Copyright (c) 2010 ActiveState Software Inc. All rights reserved.
"""
    pypm.common.backport
    ~~~~~~~~~~~~~~~~~~~~~
    
    Provide what is *not* in 'six' already
    You should just do "import ...backport" and then use the new imports as
    six.moves.<name>
    
    WARNING: we are using unofficial methods in the `six` package; ideally
    https://bugs.launchpad.net/python-six/+bug/653383 should be implemented.
"""

__all__ = ['utf8_cat']

from six import PY3
from six import _Module
from six import _Attribute
from six import _MovedItems


attributes = [
    _Module('xmlrpc_client', 'xmlrpclib', 'xmlrpc.client'),
    _Attribute('HTTPError', 'urllib2', 'urllib.error'),
    _Attribute('URLError', 'urllib2', 'urllib.error'),
    _Attribute('Request', 'urllib2', 'urllib.request'),
    _Attribute('urlopen', 'urllib2', 'urllib.request'),
    _Attribute('urllib_version', 'urllib2', 'urllib.request', '__version__'),
    _Attribute('urlparse', 'urlparse', 'urllib.parse'),
]
for attr in attributes:
    setattr(_MovedItems, attr.name, attr)
del attr
del attributes

if PY3:
    def utf8_cat(f):
        """Read the given file in utf8 encoding"""
        return open(f, encoding='utf8').read()
else:
    def utf8_cat(f):
        """Read the given file in utf8 encoding"""
        return open(f).read().decode('utf8')
